# ç« èŠ‚åˆ‡åˆ† Debug é¢æ¿ PRDï¼ˆReading Unit Debuggerï¼‰

## 1. è®¾è®¡èƒŒæ™¯

åœ¨å¼•å…¥ã€Œç« èŠ‚åˆå¹¶è¯„åˆ†è§„åˆ™ã€åï¼ŒDeepReader çš„ç« èŠ‚ç»“æ„å°†ä¸å†æ˜¯ç¡®å®šæ€§çš„æ–‡ä»¶æ˜ å°„ç»“æœï¼Œè€Œæ˜¯**è§„åˆ™é©±åŠ¨çš„æ¨æ–­ç»“æœ**ã€‚

è¿™ç±»ç³»ç»Ÿçš„æ ¸å¿ƒé—®é¢˜ä¸æ˜¯â€œèƒ½ä¸èƒ½è·‘â€ï¼Œè€Œæ˜¯ï¼š
- ä¸ºä»€ä¹ˆè¢«åˆå¹¶ï¼Ÿ
- ä¸ºä»€ä¹ˆè¢«æ‹†åˆ†ï¼Ÿ
- å“ªæ¡è§„åˆ™èµ·äº†å†³å®šæ€§ä½œç”¨ï¼Ÿ

å› æ­¤éœ€è¦ä¸€ä¸ª**ä¸“ç”¨çš„ç« èŠ‚åˆ‡åˆ† Debug é¢æ¿**ï¼Œç”¨äºï¼š
- è§„åˆ™è°ƒè¯•
- å‚æ•°æ ¡å‡†
- å¤æ‚æ–‡æ¡£ï¼ˆå°¤å…¶æ˜¯ PDF / EPUBï¼‰çš„é—®é¢˜å®šä½

è¯¥é¢æ¿æ˜¯ **å†…éƒ¨å¼€å‘è€…å·¥å…·ï¼ˆDev Toolï¼‰**ï¼Œä¸é¢å‘æ™®é€šç”¨æˆ·ã€‚

---

## 2. äº§å“ç›®æ ‡

### 2.1 æ ¸å¿ƒç›®æ ‡

- å¯è§†åŒ–æ¯ä¸ª Segment çš„è¯„åˆ†è¿‡ç¨‹
- å¿«é€Ÿå®šä½é”™è¯¯ç« èŠ‚è¾¹ç•Œçš„æˆå› 
- æ”¯æŒè§„åˆ™æƒé‡ / é˜ˆå€¼çš„å¿«é€Ÿè¯•éªŒï¼ˆéç”Ÿäº§ï¼‰

### 2.2 éç›®æ ‡

- ä¸æ”¯æŒæœ€ç»ˆç”¨æˆ·ä½¿ç”¨
- ä¸æ¶‰åŠ AI è§„åˆ™è®­ç»ƒ
- ä¸ä¿å­˜ç”¨æˆ·ä¸ªäººé˜…è¯»æ•°æ®

---

## 3. ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šEPUB ç« èŠ‚è¿‡ç¢
- å‘ç°å¤§é‡ 200~300 å­—çš„â€œç« èŠ‚â€
- æ€€ç–‘ length_score / heading_score æƒé‡ä¸åˆç†

### åœºæ™¯ 2ï¼šPDF åºè¨€è¢«é”™è¯¯æ‹†åˆ†
- PDF å‰ 10 é¡µè¢«æ‹†æˆå¤šä¸ª Reading Unit
- æ€€ç–‘ position_score / content_score

### åœºæ™¯ 3ï¼šè§„åˆ™å›å½’æµ‹è¯•
- ä¿®æ”¹è§„åˆ™åï¼Œå¯¹æ¯”æ–°æ—§ç‰ˆæœ¬çš„ç« èŠ‚ç»“æœå·®å¼‚

---

## 4. é¢æ¿æ€»ä½“ç»“æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡æ¡£é€‰æ‹© / è§„åˆ™ç‰ˆæœ¬é€‰æ‹©                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Segment åˆ—è¡¨  â”‚ Reading Unit é¢„è§ˆåŒº     â”‚
â”‚ï¼ˆæ—¶é—´è½´ï¼‰     â”‚ï¼ˆåˆå¹¶åçš„ç« èŠ‚ï¼‰         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Segment è¯¦æƒ…é¢æ¿                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è§„åˆ™æƒé‡ / é˜ˆå€¼è°ƒè¯•åŒºï¼ˆå¯é€‰ï¼‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. æ ¸å¿ƒæ¨¡å—è®¾è®¡

## 5.1 Segment æ—¶é—´è½´ï¼ˆå·¦ä¾§ï¼‰

### åŠŸèƒ½
- æŒ‰æ–‡æ¡£é¡ºåºå±•ç¤ºæ‰€æœ‰ Segment
- æ ‡æ³¨æ¯ä¸ª Segment çš„å†³ç­–ç»“æœ

### å±•ç¤ºä¿¡æ¯

- Segment ID
- Headingï¼ˆå¦‚æœ‰ï¼‰
- å­—æ•°
- ä½ç½®ç™¾åˆ†æ¯”
- å†³ç­–ç»“æœï¼š
  - ğŸŸ¢ merge
  - ğŸ”µ new

### äº¤äº’
- ç‚¹å‡» Segment â†’ é«˜äº®å¯¹åº” Reading Unit
- Hover â†’ æ˜¾ç¤º TotalScore

---

## 5.2 Reading Unit é¢„è§ˆåŒºï¼ˆå³ä¸Šï¼‰

### åŠŸèƒ½
- å±•ç¤ºæœ€ç»ˆåˆå¹¶åçš„ç« èŠ‚ç»“æ„

### å±•ç¤ºä¿¡æ¯
- Reading Unit æ ‡é¢˜
- åŒ…å«çš„ Segment æ•°é‡
- æ€»å­—æ•°
- æ¥æºï¼ˆtoc / heuristicï¼‰

### äº¤äº’
- ç‚¹å‡» Reading Unit â†’ é«˜äº®å…¶åŒ…å«çš„æ‰€æœ‰ Segment

---

## 5.3 Segment è¯¦æƒ…é¢æ¿ï¼ˆæ ¸å¿ƒï¼‰

> è¿™æ˜¯æ•´ä¸ª Debug é¢æ¿**æœ€é‡è¦çš„åŒºåŸŸ**ã€‚

### åŸºç¡€ä¿¡æ¯

- Segment ID
- æ¥æºæ ¼å¼ï¼ˆepub / pdf / md / txt / htmlï¼‰
- Heading æ–‡æœ¬
- æ­£æ–‡å­—æ•°
- ä½ç½®æ¯”ä¾‹

---

### è¯„åˆ†æ˜ç»†è¡¨ï¼ˆå¿…é¡»ï¼‰

| ç»´åº¦ | åˆ†æ•° | æƒé‡ | åŠ æƒå | è¯´æ˜ |
|----|----|----|----|----|
| TOC | +1 | 1.5 | +1.5 | äºŒçº§ç›®å½• |
| Heading | +2 | 1.2 | +2.4 | å°èŠ‚æ ‡é¢˜ |
| Length | +3 | 1.0 | +3.0 | <300 å­— |
| Content | 0 | 1.0 | 0 | æ­£æ–‡ |
| Position | +1 | 0.8 | +0.8 | ç´§è·Ÿç« æ ‡é¢˜ |
| Continuity | +2 | 0.8 | +1.6 | 1.1 â†’ 1.2 |
| **Total** |  |  | **+9.3** | merge |

---

### å†³ç­–è§£é‡ŠåŒºï¼ˆExplainï¼‰

è‡ªåŠ¨ç”Ÿæˆä¸€æ®µç»“æ„åŒ–è§£é‡Šï¼š

> è¯¥ Segment è¢«åˆå¹¶çš„ä¸»è¦åŸå› æ˜¯ï¼š
> - å­—æ•°è¿‡çŸ­ï¼ˆ+3ï¼‰
> - æ ‡é¢˜ä¸ºå°èŠ‚æ ‡é¢˜ï¼ˆ+2ï¼‰
> - ç¼–å·è¿ç»­ï¼ˆ+2ï¼‰
>
> å°½ç®¡ä½äº TOC ä¸­ï¼Œä½†å±‚çº§è¾ƒä½ï¼Œä¸æ„æˆæ–°ç« èŠ‚ã€‚

---

## 5.4 è§„åˆ™è°ƒè¯•åŒºï¼ˆé«˜çº§ / å¯é€‰ï¼‰

> âš ï¸ ä»…åœ¨ Debug æ¨¡å¼å¯ç”¨

### åŠŸèƒ½

- è°ƒæ•´æƒé‡ï¼ˆsliderï¼‰
- è°ƒæ•´é˜ˆå€¼ï¼ˆmerge / newï¼‰
- å®æ—¶é‡æ–°è®¡ç®—ç« èŠ‚ç»“æœ

### ç¤ºä¾‹

- length_score æƒé‡ï¼š`1.0 â†’ 0.6`
- merge é˜ˆå€¼ï¼š`+3 â†’ +4`

### å³æ—¶åé¦ˆ

- Reading Unit æ•°é‡å˜åŒ–
- é«˜äº®å‘ç”Ÿå˜åŒ–çš„ Segment

---

## 6. æ•°æ®æ¥å£è¦æ±‚

### 6.1 è¾“å…¥æ•°æ®

```ts
interface DebugSegmentScore {
  segmentId: string
  scores: {
    toc?: number
    heading?: number
    length?: number
    content?: number
    position?: number
    continuity?: number
  }
  weights: Record<string, number>
  totalScore: number
  decision: 'merge' | 'new'
}
```

---

### 6.2 Reading Unit ç»“æ„

```ts
interface DebugReadingUnit {
  id: string
  title: string
  segmentIds: string[]
}
```

---

## 7. æŠ€æœ¯å®ç°å»ºè®®ï¼ˆè´´åˆ DeepReaderï¼‰

- å‰ç«¯ï¼šReact + Tailwind
- ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨ï¼ˆSegment å¯èƒ½å¾ˆå¤šï¼‰
- Debug æ•°æ®æ¥è‡ªæœ¬åœ°æ•°æ®åº“ / å†…å­˜
- Debug é¢æ¿ä¸å½±å“ç”Ÿäº§æ„å»º

---

## 8. æˆåŠŸæ ‡å‡†

- èƒ½åœ¨ 5 åˆ†é’Ÿå†…å®šä½ä¸€ä¸ªé”™è¯¯ç« èŠ‚çš„æˆå› 
- èƒ½æ¸…æ¥šå›ç­”â€œä¸ºä»€ä¹ˆè¿™æ®µä¼šè¢«åˆå¹¶ / æ‹†åˆ†â€
- è§„åˆ™è°ƒæ•´æœ‰å³æ—¶ã€å¯è§çš„åé¦ˆ

---

## 9. ä¸€å¥è¯æ€»ç»“

> Debug é¢æ¿ä¸æ˜¯ä¸ºäº†â€œå¥½çœ‹â€ï¼Œè€Œæ˜¯ä¸ºäº†è®© **ç« èŠ‚åˆ‡åˆ†è§„åˆ™æˆä¸ºä¸€å¥—å¯è¢«äººç±»ç†è§£å’Œé©¾é©­çš„ç³»ç»Ÿ**ã€‚

è¿™å°†æ˜¯ DeepReader åŒºåˆ«äºæ‰€æœ‰æ™®é€šé˜…è¯»å™¨çš„éšè—æ ¸å¿ƒèƒ½åŠ›ã€‚

